<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edge Future Link Solutions - Client Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'], // Use Inter font
                    },
                    keyframes: { // Add keyframes for spinner
                        spin: {
                           '0%': { transform: 'rotate(0deg)' },
                          '100%': { transform: 'rotate(360deg)' },
                        }
                    },
                    animation: { // Add animation utility
                        spin: 'spin 1s linear infinite',
                    }
                }
            }
        }
    </script>
    <style>
        /* Basic styling for icons */
        .icon {
            width: 1.5rem; /* 24px */
            height: 1.5rem; /* 24px */
            display: inline-block;
            vertical-align: middle;
            margin-right: 0.5rem; /* Add some space next to icon */
        }
        /* Style for status badges */
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px; /* pill shape */
            font-size: 0.75rem; /* small text */
            font-weight: 600; /* semi-bold */
            text-transform: uppercase;
            letter-spacing: 0.05em;
            white-space: nowrap; /* Prevent badge text wrapping */
        }
        /* Shipment Statuses */
        .status-transit { background-color: #dbeafe; color: #1e40af; } /* blue */
        .status-delivery { background-color: #fef08a; color: #a16207; } /* yellow */
        .status-delivered { background-color: #dcfce7; color: #166534; } /* green */
        .status-customs { background-color: #fee2e2; color: #991b1b; } /* red */
        .status-booked { background-color: #e5e7eb; color: #374151; } /* gray */

        /* Quote Statuses */
        .status-pending { background-color: #e0e7ff; color: #3730a3; } /* indigo */
        .status-quoted { background-color: #dbeafe; color: #1e40af; } /* blue */
        .status-accepted { background-color: #dcfce7; color: #166534; } /* green */
        .status-rejected { background-color: #fee2e2; color: #991b1b; } /* red */

        /* Form specific styles */
        .form-label {
            display: block; margin-bottom: 0.25rem; font-weight: 500; color: #374151;
        }
        .form-input, .form-select, .form-textarea {
            width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #D1D5DB; border-radius: 0.375rem;
            box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.05); margin-bottom: 1rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none; border-color: #3B82F6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
        }
        .form-section {
            margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid #e5e7eb;
        }
        .form-section:last-child { border-bottom: none; padding-bottom: 0; }

        /* Modal styles */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center;
            z-index: 50;
        }
        .modal-content {
            background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-width: 90%; width: 50rem; max-height: 90vh; overflow-y: auto;
        }

        /* Notifications Dropdown */
        .notifications-dropdown {
            position: absolute;
            right: 0;
            top: 100%; /* Position below the button */
            margin-top: 0.5rem; /* Add some space */
            width: 20rem; /* Adjust width as needed */
            background-color: white;
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            z-index: 40; /* Below modal, above header content */
            border: 1px solid #e5e7eb; /* gray-200 */
            overflow: hidden;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(255, 255, 255, 0.7); /* Semi-transparent white */
            display: flex; align-items: center; justify-content: center;
            z-index: 60; /* Highest z-index */
        }
        /* Spinner Icon */
        .spinner {
             width: 3rem; /* Adjust size */
             height: 3rem;
             /* Uses Tailwind animation utility defined in config */
        }

        /* Confirmation Toast */
        .confirmation-toast {
            position: fixed;
            bottom: 1.5rem; /* Adjust position */
            left: 50%;
            transform: translateX(-50%);
            padding: 0.75rem 1.5rem;
            background-color: #10b981; /* emerald-500 */
            color: white;
            border-radius: 9999px; /* rounded-full */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            z-index: 60; /* On top */
            opacity: 0; /* Initially hidden */
            transition: opacity 0.3s ease-in-out;
        }
        .confirmation-toast.show {
            opacity: 1;
        }


        /* Utility to hide elements */
        .hidden { display: none; }

    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div id="loadingOverlay" class="loading-overlay hidden">
         <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/loader-2.svg" alt="Loading..." class="spinner animate-spin text-blue-600"/>
    </div>

    <div id="confirmationToast" class="confirmation-toast">
        <span id="toastMessage">Action successful!</span>
    </div>


    <div class="flex flex-col min-h-screen">

        <header class="bg-white shadow-md sticky top-0 z-20"> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex-shrink-0">
                        <a href="#" id="logoLink" class="text-2xl font-bold text-blue-700">Edge Future Link Solutions</a>
                    </div>
                    <div class="flex items-center space-x-2">
                         <button id="showDashboardBtn" class="px-4 py-2 rounded-lg text-sm font-medium transition duration-150 ease-in-out">
                            Dashboard
                        </button>
                         <button id="showBookingFormBtn" class="px-4 py-2 rounded-lg text-sm font-medium transition duration-150 ease-in-out">
                            Book Shipment
                        </button>
                         <button id="showQuotesBtn" class="px-4 py-2 rounded-lg text-sm font-medium transition duration-150 ease-in-out">
                            Manage Quotes
                        </button>

                        <div class="relative ml-3"> <button id="notificationsBellBtn" class="p-1 rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                <span class="sr-only">View notifications</span>
                                <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/bell.svg" alt="Notifications" class="h-6 w-6"/>
                                </button>
                             <div id="notificationsDropdown" class="notifications-dropdown hidden">
                                 <div class="px-4 py-3 border-b border-gray-200">
                                     <p class="text-sm font-medium text-gray-700">Notifications</p>
                                 </div>
                                 <ul class="divide-y divide-gray-200 max-h-60 overflow-y-auto">
                                     <li class="p-3 hover:bg-gray-50">
                                         <a href="#" class="block text-sm text-gray-600">
                                             <p class="font-medium text-gray-800">Shipment EFL-67890</p>
                                             <p>Cleared customs in Tokyo, JP.</p>
                                             <p class="text-xs text-gray-400 mt-1">1 hour ago</p>
                                         </a>
                                     </li>
                                      <li class="p-3 hover:bg-gray-50">
                                         <a href="#" class="block text-sm text-gray-600">
                                             <p class="font-medium text-gray-800">Quote QTE-00101</p>
                                             <p>Quote details are ready for review.</p>
                                             <p class="text-xs text-gray-400 mt-1">Yesterday</p>
                                         </a>
                                     </li>
                                     <li class="p-3 hover:bg-gray-50">
                                         <a href="#" class="block text-sm text-gray-600">
                                             <p class="font-medium text-gray-800">Delivery Update</p>
                                             <p>Shipment EFL-11223 is out for delivery.</p>
                                             <p class="text-xs text-gray-400 mt-1">Apr 4, 2025</p>
                                         </a>
                                     </li>
                                     </ul>
                                 <div class="px-4 py-2 bg-gray-50 border-t border-gray-200">
                                     <a href="#" class="text-sm font-medium text-blue-600 hover:text-blue-800">View all notifications</a>
                                 </div>
                             </div>
                        </div>

                        <div class="ml-3 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600">
                            JD
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

            <div id="dashboardView">
                <h1 class="text-3xl font-semibold text-gray-800 mb-6">Client Dashboard</h1>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow-md p-6 flex items-center">
                             <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/truck.svg" alt="Shipments" class="icon text-blue-500"/>
                            <div>
                                <div class="text-3xl font-bold text-gray-800">15</div> <div class="text-sm font-medium text-gray-500 uppercase tracking-wider">Active Shipments</div>
                            </div>
                        </div>
                         <div class="bg-white rounded-lg shadow-md p-6 flex items-center">
                             <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/calendar-check.svg" alt="Deliveries" class="icon text-green-500"/>
                            <div>
                                <div class="text-3xl font-bold text-gray-800">4</div> <div class="text-sm font-medium text-gray-500 uppercase tracking-wider">Deliveries Today</div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-md p-6 flex items-center md:col-span-2">
                             <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/alert-triangle.svg" alt="Alerts" class="icon text-red-500"/>
                            <div>
                                <div class="text-3xl font-bold text-gray-800">2</div> <div class="text-sm font-medium text-gray-500 uppercase tracking-wider">Active Alerts</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-md p-6 lg:col-span-1">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Shipment Status</h2>
                        <div class="relative h-64 md:h-80">
                            <canvas id="shipmentChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Active Shipments Tracking</h2>
                    <div class="flex flex-col md:flex-row justify-between items-center mb-4 space-y-2 md:space-y-0">
                        <div class="relative w-full md:w-1/3">
                            <input type="text" id="shipmentSearchInput" placeholder="Search Shipments..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/search.svg" alt="Search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"/>
                        </div>
                        <div class="flex space-x-2">
                            <select id="shipmentStatusFilter" class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                                <option value="">All Statuses</option>
                                <option value="In Transit">In Transit</option>
                                <option value="Customs Clearance">Customs Clearance</option>
                                <option value="Out for Delivery">Out for Delivery</option>
                                <option value="Delivered">Delivered</option>
                                <option value="Booked">Booked</option>
                            </select>
                             <input type="date" id="shipmentDateFilter" class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Shipment ID</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Origin</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Destination</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Predicted ETA</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="shipmentsTableBody" class="bg-white divide-y divide-gray-200">
                                <tr data-status="In Transit" data-id="EFL-12345" data-origin="Shanghai, CN" data-destination="Singapore, SG" data-eta="Apr 6, 2025 14:00">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-12345</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Shanghai, CN</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Singapore, SG</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-transit">In Transit</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 6, 2025 14:00</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                <tr data-status="Customs Clearance" data-id="EFL-67890" data-origin="Rotterdam, NL" data-destination="Tokyo, JP" data-eta="Apr 5, 2025 09:00">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-67890</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Rotterdam, NL</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Tokyo, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-customs">Customs Clearance</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 5, 2025 09:00</td>
                                     <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                 <tr data-status="Out for Delivery" data-id="EFL-11223" data-origin="Los Angeles, US" data-destination="Osaka, JP" data-eta="Apr 4, 2025 11:30">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-11223</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Los Angeles, US</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Osaka, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-delivery">Out for Delivery</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 4, 2025 11:30</td>
                                     <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                 <tr data-status="Delivered" data-id="EFL-44556" data-origin="Singapore, SG" data-destination="Nagoya, JP" data-eta="Apr 3, 2025 16:20">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-44556</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Singapore, SG</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Nagoya, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-delivered">Delivered</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 3, 2025 16:20</td>
                                     <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                 <tr data-status="Booked" data-id="EFL-77889" data-origin="Osaka, JP" data-destination="Singapore, SG" data-eta="Apr 10, 2025 18:00">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-77889</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Osaka, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Singapore, SG</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-booked">Booked</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 10, 2025 18:00</td>
                                     <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                <tr data-status="Booked" data-id="EFL-10112" data-origin="Tokyo, JP" data-destination="Shanghai, CN" data-eta="Apr 12, 2025 10:00">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-10112</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Tokyo, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Shanghai, CN</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-booked">Booked</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 12, 2025 10:00</td>
                                     <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                <tr data-status="In Transit" data-id="EFL-31415" data-origin="Nagoya, JP" data-destination="Rotterdam, NL" data-eta="Apr 9, 2025 15:00">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-31415</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Nagoya, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Rotterdam, NL</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-transit">In Transit</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 9, 2025 15:00</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                <tr data-status="Delivered" data-id="EFL-98765" data-origin="Osaka, JP" data-destination="Los Angeles, US" data-eta="Apr 2, 2025 11:00">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-98765</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Osaka, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Los Angeles, US</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-delivered">Delivered</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 2, 2025 11:00</td>
                                     <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                 <tr data-status="Booked" data-id="EFL-27182" data-origin="Singapore, SG" data-destination="Tokyo, JP" data-eta="Apr 15, 2025 09:30">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-27182</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Singapore, SG</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Tokyo, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-booked">Booked</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 15, 2025 09:30</td>
                                     <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                                <tr data-status="In Transit" data-id="EFL-55555" data-origin="Rotterdam, NL" data-destination="Osaka, JP" data-eta="Apr 7, 2025 16:00">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">EFL-55555</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Rotterdam, NL</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Osaka, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-transit">In Transit</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 7, 2025 16:00</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                     <div class="mt-4 flex justify-center">
                        <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                            <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"> Prev </a>
                            <a href="#" aria-current="page" class="z-10 bg-blue-50 border-blue-500 text-blue-600 relative inline-flex items-center px-4 py-2 border text-sm font-medium"> 1 </a>
                            <a href="#" class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium"> 2 </a>
                            <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"> Next </a>
                        </nav>
                    </div>
                </div>
            </div><div id="bookingView" class="hidden max-w-4xl mx-auto">
                <h1 class="text-3xl font-semibold text-gray-800 mb-6">Book New Shipment</h1>
                <div class="bg-white rounded-lg shadow-md p-6 md:p-8">
                    <form id="bookingForm" action="#" method="POST">
                         <div class="form-section">
                            <h2 class="text-lg font-semibold text-gray-700 mb-4">Origin Details</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div><label for="origin-company" class="form-label">Company Name</label><input type="text" id="origin-company" name="origin-company" placeholder="Enter company name" class="form-input"></div>
                                <div><label for="origin-contact" class="form-label">Contact Person</label><input type="text" id="origin-contact" name="origin-contact" placeholder="Enter contact name" class="form-input"></div>
                                <div><label for="origin-address" class="form-label">Street Address</label><input type="text" id="origin-address" name="origin-address" placeholder="Enter street address" class="form-input"></div>
                                <div><label for="origin-city" class="form-label">City</label><input type="text" id="origin-city" name="origin-city" placeholder="Enter city" class="form-input"></div>
                                <div><label for="origin-country" class="form-label">Country</label><select id="origin-country" name="origin-country" class="form-select"><option>Select Country</option><option>Singapore</option><option>Japan</option><option>China</option><option>USA</option><option>Netherlands</option></select></div>
                                <div><label for="origin-postal" class="form-label">Postal Code</label><input type="text" id="origin-postal" name="origin-postal" placeholder="Enter postal code" class="form-input"></div>
                            </div>
                        </div>
                        <div class="form-section">
                            <h2 class="text-lg font-semibold text-gray-700 mb-4">Destination Details</h2>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div><label for="dest-company" class="form-label">Company Name</label><input type="text" id="dest-company" name="dest-company" placeholder="Enter company name" class="form-input"></div>
                                <div><label for="dest-contact" class="form-label">Contact Person</label><input type="text" id="dest-contact" name="dest-contact" placeholder="Enter contact name" class="form-input"></div>
                                <div><label for="dest-address" class="form-label">Street Address</label><input type="text" id="dest-address" name="dest-address" placeholder="Enter street address" class="form-input"></div>
                                <div><label for="dest-city" class="form-label">City</label><input type="text" id="dest-city" name="dest-city" placeholder="Enter city" class="form-input"></div>
                                <div><label for="dest-country" class="form-label">Country</label><select id="dest-country" name="dest-country" class="form-select"><option>Select Country</option><option>Singapore</option><option>Japan</option><option>China</option><option>USA</option><option>Netherlands</option></select></div>
                                <div><label for="dest-postal" class="form-label">Postal Code</label><input type="text" id="dest-postal" name="dest-postal" placeholder="Enter postal code" class="form-input"></div>
                            </div>
                        </div>
                         <div class="form-section">
                            <h2 class="text-lg font-semibold text-gray-700 mb-4">Shipment Details</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div><label for="shipment-type" class="form-label">Type</label><select id="shipment-type" name="shipment-type" class="form-select"><option>Select Type</option><option>Pallet</option><option>Container (FCL)</option><option>Container (LCL)</option><option>Parcel</option></select></div>
                                <div><label for="shipment-weight" class="form-label">Weight (kg)</label><input type="number" id="shipment-weight" name="shipment-weight" placeholder="e.g., 500" class="form-input"></div>
                                <div><label for="shipment-value" class="form-label">Declared Value (USD)</label><input type="number" id="shipment-value" name="shipment-value" placeholder="e.g., 10000" class="form-input"></div>
                            </div>
                             <div class="mt-4"><label for="shipment-instructions" class="form-label">Special Instructions</label><textarea id="shipment-instructions" name="shipment-instructions" rows="3" placeholder="e.g., Requires temperature control, Handle with care" class="form-textarea"></textarea></div>
                        </div>
                         <div class="form-section">
                            <h2 class="text-lg font-semibold text-gray-700 mb-4">Dates</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                 <div><label for="pickup-date" class="form-label">Requested Pickup Date</label><input type="date" id="pickup-date" name="pickup-date" class="form-input"></div>
                                 <div><label for="delivery-date" class="form-label">Requested Delivery Date</label><input type="date" id="delivery-date" name="delivery-date" class="form-input"></div>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-end space-x-3">
                             <button type="button" id="cancelBookingBtn" class="bg-gray-200 text-gray-700 hover:bg-gray-300 px-6 py-2 rounded-lg font-medium transition duration-150 ease-in-out">Cancel</button>
                             <button type="submit" id="getQuoteBtn" class="bg-green-600 text-white hover:bg-green-700 px-6 py-2 rounded-lg font-medium transition duration-150 ease-in-out">Get Quote & Review</button>
                             <button type="submit" id="submitBookingBtn" class="bg-blue-600 text-white hover:bg-blue-700 px-6 py-2 rounded-lg font-medium transition duration-150 ease-in-out">Submit Booking Request</button>
                        </div>
                    </form>
                </div>
            </div> <div id="quoteManagementView" class="hidden">
                 <h1 class="text-3xl font-semibold text-gray-800 mb-6">Quote Management</h1>
                 <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Requested Quotes</h2>
                    <div class="flex flex-col md:flex-row justify-between items-center mb-4 space-y-2 md:space-y-0">
                        <div class="relative w-full md:w-1/3">
                            <input type="text" id="quoteSearchInput" placeholder="Search Quotes..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <img src="https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/search.svg" alt="Search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"/>
                        </div>
                        <div class="flex space-x-2">
                            <select id="quoteStatusFilter" class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                                <option value="">All Statuses</option>
                                <option value="Pending">Pending</option>
                                <option value="Quoted">Quoted</option>
                                <option value="Accepted">Accepted</option>
                                <option value="Rejected">Rejected</option>
                            </select>
                             <input type="date" id="quoteDateFilter" class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" placeholder="Requested Date">
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quote ID</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Origin</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Destination</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date Requested</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="quotesTableBody" class="bg-white divide-y divide-gray-200">
                                <tr data-status="Quoted" data-date="2025-04-03">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">QTE-00101</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Shanghai, CN</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Los Angeles, US</td>
                                    <td class="px-6 py-4 whitespace-nowrap"><span class="status-badge status-quoted">Quoted</span></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 3, 2025</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><a href="#" class="text-blue-600 hover:text-blue-800">Details</a></td>
                                </tr>
                                <tr data-status="Pending" data-date="2025-04-04">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">QTE-00102</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Osaka, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Singapore, SG</td>
                                    <td class="px-6 py-4 whitespace-nowrap"><span class="status-badge status-pending">Pending</span></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 4, 2025</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><a href="#" class="text-blue-600 hover:text-blue-800">Details</a></td>
                                </tr>
                                <tr data-status="Accepted" data-date="2025-04-01">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">QTE-00098</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Rotterdam, NL</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Tokyo, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap"><span class="status-badge status-accepted">Accepted</span></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 1, 2025</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><a href="#" class="text-blue-600 hover:text-blue-800">Details</a></td>
                                </tr>
                                 <tr data-status="Rejected" data-date="2025-03-30">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">QTE-00095</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Singapore, SG</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Nagoya, JP</td>
                                    <td class="px-6 py-4 whitespace-nowrap"><span class="status-badge status-rejected">Rejected</span></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 30, 2025</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><a href="#" class="text-blue-600 hover:text-blue-800">Details</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-4 flex justify-center">
                        <p class="text-sm text-gray-500">Pagination for quotes goes here</p>
                     </div>
                 </div>
            </div> </main>

        <footer class="bg-white mt-auto">
            <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
                &copy; 2025 Edge Future Link Solutions. All rights reserved. | <a href="#" class="hover:underline">Support</a> | <a href="#" class="hover:underline">Privacy Policy</a>
            </div>
        </footer>

    </div> <div id="shipmentDetailModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center pb-3 mb-4 border-b border-gray-200">
                <h3 class="text-xl font-semibold text-gray-800">Shipment Details</h3>
                <button id="closeShipmentModalBtn" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div><span class="font-semibold text-gray-600">Shipment ID:</span> <span id="modalShipmentId" class="text-gray-800"></span></div>
                    <div><span class="font-semibold text-gray-600">Status:</span> <span id="modalShipmentStatus" class="text-gray-800"></span></div>
                    <div><span class="font-semibold text-gray-600">Origin:</span> <span id="modalShipmentOrigin" class="text-gray-800"></span></div>
                    <div><span class="font-semibold text-gray-600">Destination:</span> <span id="modalShipmentDestination" class="text-gray-800"></span></div>
                    <div class="md:col-span-2"><span class="font-semibold text-gray-600">Predicted ETA:</span> <span id="modalShipmentEta" class="text-gray-800"></span></div>
                </div>

                <div class="mt-6 space-y-4">
                    <div>
                        <h4 class="text-md font-semibold text-gray-700 mb-2">Tracking History</h4>
                        <div class="border border-gray-200 rounded-md p-4 bg-gray-50 text-sm text-gray-500">
                            Placeholder for detailed tracking event timeline...
                            <ul>
                                <li>Apr 4, 2025 10:00 - Event Placeholder</li>
                                <li>Apr 3, 2025 15:30 - Another Event Placeholder</li>
                            </ul>
                        </div>
                    </div>
                     <div>
                        <h4 class="text-md font-semibold text-gray-700 mb-2">Carrier Information</h4>
                        <div class="border border-gray-200 rounded-md p-4 bg-gray-50 text-sm text-gray-500">
                            Placeholder for carrier details...
                        </div>
                    </div>
                     <div>
                        <h4 class="text-md font-semibold text-gray-700 mb-2">Documents</h4>
                        <div class="border border-gray-200 rounded-md p-4 bg-gray-50 text-sm text-gray-500">
                            Placeholder for links to Bill of Lading, Invoice, etc...
                        </div>
                    </div>
                </div>
            </div>
             <div class="mt-6 pt-4 border-t border-gray-200 flex justify-end">
                 <button id="closeShipmentModalFooterBtn" class="bg-gray-200 text-gray-700 hover:bg-gray-300 px-4 py-2 rounded-lg text-sm font-medium transition duration-150 ease-in-out">
                    Close
                </button>
             </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {

            // --- DOM Element References ---
            const views = {
                dashboard: document.getElementById('dashboardView'),
                booking: document.getElementById('bookingView'),
                quotes: document.getElementById('quoteManagementView')
            };
            const navButtons = {
                dashboard: document.getElementById('showDashboardBtn'),
                booking: document.getElementById('showBookingFormBtn'),
                quotes: document.getElementById('showQuotesBtn')
            };
            const otherButtons = {
                cancelBooking: document.getElementById('cancelBookingBtn'),
                logo: document.getElementById('logoLink'),
                submitBooking: document.getElementById('submitBookingBtn'),
                getQuote: document.getElementById('getQuoteBtn')
            };
            const mainContainer = document.querySelector('main');

            // Shipment Table Elements
            const shipmentTableBody = document.getElementById('shipmentsTableBody');
            const shipmentSearchInput = document.getElementById('shipmentSearchInput');
            const shipmentStatusFilter = document.getElementById('shipmentStatusFilter');
            const shipmentDateFilter = document.getElementById('shipmentDateFilter');

            // Quote Table Elements
            const quotesTableBody = document.getElementById('quotesTableBody');
            const quoteSearchInput = document.getElementById('quoteSearchInput');
            const quoteStatusFilter = document.getElementById('quoteStatusFilter');
            const quoteDateFilter = document.getElementById('quoteDateFilter');

            // Modal Elements
            const modal = document.getElementById('shipmentDetailModal');
            const closeModalBtns = [
                document.getElementById('closeShipmentModalBtn'),
                document.getElementById('closeShipmentModalFooterBtn')
            ];
            const modalShipmentId = document.getElementById('modalShipmentId');
            const modalShipmentStatus = document.getElementById('modalShipmentStatus');
            const modalShipmentOrigin = document.getElementById('modalShipmentOrigin');
            const modalShipmentDestination = document.getElementById('modalShipmentDestination');
            const modalShipmentEta = document.getElementById('modalShipmentEta');

            // Notifications Elements
            const notificationsBellBtn = document.getElementById('notificationsBellBtn');
            const notificationsDropdown = document.getElementById('notificationsDropdown');

            // UI Polish Elements
            const loadingOverlay = document.getElementById('loadingOverlay');
            const confirmationToast = document.getElementById('confirmationToast');
            const toastMessage = document.getElementById('toastMessage');
            const bookingForm = document.getElementById('bookingForm');

            // Chart Element
            const chartCanvas = document.getElementById('shipmentChart');
            let shipmentStatusChart = null; // Variable to hold the chart instance

            // --- Style Definitions ---
            const activeClasses = ['bg-blue-600', 'text-white', 'hover:bg-blue-700'];
            const inactiveClasses = ['bg-gray-100', 'text-gray-700', 'hover:bg-gray-200'];


            // --- UI Polish Functions ---
            function showLoading() {
                loadingOverlay?.classList.remove('hidden');
            }
            function hideLoading() {
                loadingOverlay?.classList.add('hidden');
            }

            let toastTimeout;
            function showConfirmation(message = "Action successful!", duration = 3000) {
                if (confirmationToast && toastMessage) {
                    clearTimeout(toastTimeout);
                    toastMessage.textContent = message;
                    confirmationToast.classList.add('show');
                    toastTimeout = setTimeout(() => {
                        confirmationToast.classList.remove('show');
                    }, duration);
                }
            }


            // --- View Switching Logic ---
            function setActiveView(activeViewId) {
                Object.values(views).forEach(view => view?.classList.add('hidden'));
                if (views[activeViewId]) {
                    views[activeViewId].classList.remove('hidden');
                }

                if (activeViewId === 'booking') {
                    mainContainer.classList.remove('max-w-7xl');
                    mainContainer.classList.add('max-w-4xl');
                } else {
                    mainContainer.classList.remove('max-w-4xl');
                    mainContainer.classList.add('max-w-7xl');
                }

                Object.keys(navButtons).forEach(viewId => {
                    const button = navButtons[viewId];
                    if (button) {
                        button.classList.remove(...activeClasses, ...inactiveClasses);
                        if (viewId === activeViewId) {
                            button.classList.add(...activeClasses);
                        } else {
                            button.classList.add(...inactiveClasses);
                        }
                    }
                });
                 hideNotificationsDropdown();
            }

            navButtons.dashboard?.addEventListener('click', () => setActiveView('dashboard'));
            navButtons.booking?.addEventListener('click', () => setActiveView('booking'));
            navButtons.quotes?.addEventListener('click', () => setActiveView('quotes'));
            otherButtons.logo?.addEventListener('click', (e) => { e.preventDefault(); setActiveView('dashboard'); });
            otherButtons.cancelBooking?.addEventListener('click', () => setActiveView('dashboard'));
            setActiveView('dashboard');


            // --- Notifications Logic ---
            function hideNotificationsDropdown() {
                 notificationsDropdown?.classList.add('hidden');
            }
            function toggleNotificationsDropdown() {
                 notificationsDropdown?.classList.toggle('hidden');
            }
            notificationsBellBtn?.addEventListener('click', (event) => {
                event.stopPropagation();
                toggleNotificationsDropdown();
            });
            document.addEventListener('click', (event) => {
                if (!notificationsBellBtn?.contains(event.target) && !notificationsDropdown?.contains(event.target)) {
                    hideNotificationsDropdown();
                }
            });


            // --- Generic Table Filtering Logic (with Loading Simulation) ---
            function filterTable(tableBody, searchInput, statusFilter, dateFilter, dateAttr = 'data-date') {
                if (!tableBody) return;
                showLoading();
                setTimeout(() => {
                    const searchTerm = searchInput?.value.toLowerCase() || '';
                    const selectedStatus = statusFilter?.value.toLowerCase() || '';
                    const selectedDate = dateFilter?.value || '';
                    const tableRows = tableBody.getElementsByTagName('tr');

                    for (let i = 0; i < tableRows.length; i++) {
                        const row = tableRows[i];
                        const rowStatus = row.getAttribute('data-status')?.toLowerCase() || '';
                        const rowDate = row.getAttribute(dateAttr) || '';
                        const rowTextContent = row.textContent?.toLowerCase() || '';

                        const statusMatch = selectedStatus === "" || rowStatus === selectedStatus;
                        const searchMatch = searchTerm === "" || rowTextContent.includes(searchTerm);
                        const dateMatch = selectedDate === "" || rowDate === selectedDate;

                        if (statusMatch && searchMatch && dateMatch) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    }
                    hideLoading();
                    // IMPORTANT: Update chart after filtering shipment table
                    if (tableBody.id === 'shipmentsTableBody') {
                         updateShipmentChartData();
                    }
                }, 300);
            }

            shipmentSearchInput?.addEventListener('input', () => filterTable(shipmentTableBody, shipmentSearchInput, shipmentStatusFilter, shipmentDateFilter, 'data-eta-date'));
            shipmentStatusFilter?.addEventListener('change', () => filterTable(shipmentTableBody, shipmentSearchInput, shipmentStatusFilter, shipmentDateFilter, 'data-eta-date'));
            shipmentDateFilter?.addEventListener('change', () => filterTable(shipmentTableBody, shipmentSearchInput, shipmentStatusFilter, shipmentDateFilter, 'data-eta-date'));
            quoteSearchInput?.addEventListener('input', () => filterTable(quotesTableBody, quoteSearchInput, quoteStatusFilter, quoteDateFilter));
            quoteStatusFilter?.addEventListener('change', () => filterTable(quotesTableBody, quoteSearchInput, quoteStatusFilter, quoteDateFilter));
            quoteDateFilter?.addEventListener('change', () => filterTable(quotesTableBody, quoteSearchInput, quoteStatusFilter, quoteDateFilter));


            // --- Shipment Details Modal Logic ---
            function showModal(shipmentData) {
                modalShipmentId.textContent = shipmentData.id || 'N/A';
                modalShipmentStatus.textContent = shipmentData.status || 'N/A';
                modalShipmentOrigin.textContent = shipmentData.origin || 'N/A';
                modalShipmentDestination.textContent = shipmentData.destination || 'N/A';
                modalShipmentEta.textContent = shipmentData.eta || 'N/A';
                modal?.classList.remove('hidden');
            }
            function hideModal() {
                modal?.classList.add('hidden');
            }
            shipmentTableBody?.addEventListener('click', function(event) {
                if (event.target.classList.contains('shipment-details-link')) {
                    event.preventDefault();
                    const row = event.target.closest('tr');
                    if (row) {
                        const data = {
                            id: row.dataset.id, status: row.dataset.status, origin: row.dataset.origin,
                            destination: row.dataset.destination, eta: row.dataset.eta
                        };
                        showModal(data);
                    }
                }
            });
            closeModalBtns.forEach(btn => btn?.addEventListener('click', hideModal));
            modal?.addEventListener('click', (event) => { if (event.target === modal) hideModal(); });


            // --- Booking Form Submission Simulation ---
            bookingForm?.addEventListener('submit', function(event) {
                 event.preventDefault();
                 const submitter = event.submitter;
                 showLoading();
                 setTimeout(() => {
                     hideLoading();
                     if (submitter === otherButtons.submitBooking) {
                         showConfirmation("Booking request submitted successfully!");
                     } else if (submitter === otherButtons.getQuote) {
                         showConfirmation("Quote requested successfully!");
                     } else {
                         showConfirmation("Action processed.");
                     }
                     // Add new booked shipment to table (example) - In real app, this would come from server response
                     const newShipmentId = `EFL-${Math.floor(Math.random() * 90000) + 10000}`;
                     addShipmentToTable({
                         id: newShipmentId,
                         origin: document.getElementById('origin-city')?.value || 'Unknown Origin',
                         destination: document.getElementById('dest-city')?.value || 'Unknown Dest',
                         status: 'Booked',
                         eta: 'Pending'
                     });
                     bookingForm.reset(); // Reset form after adding
                     setTimeout(() => setActiveView('dashboard'), 500);

                 }, 700);
            });

            // --- Helper to add new shipment row to table ---
            function addShipmentToTable(shipment) {
                 if (!shipmentTableBody) return;

                 const newRow = document.createElement('tr');
                 newRow.setAttribute('data-status', shipment.status);
                 newRow.setAttribute('data-id', shipment.id);
                 newRow.setAttribute('data-origin', shipment.origin);
                 newRow.setAttribute('data-destination', shipment.destination);
                 newRow.setAttribute('data-eta', shipment.eta);

                 // Determine status badge class
                 let statusClass = 'status-booked'; // Default
                 if (shipment.status === 'In Transit') statusClass = 'status-transit';
                 // Add other status classes if needed

                 newRow.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${shipment.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${shipment.origin}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${shipment.destination}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="status-badge ${statusClass}">${shipment.status}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${shipment.eta}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <a href="#" class="text-blue-600 hover:text-blue-800 shipment-details-link">Details</a>
                    </td>
                 `;
                 // Prepend to table body to show newest first
                 shipmentTableBody.prepend(newRow);
                 // Update chart data
                 updateShipmentChartData();
                 // Optional: Update summary card count (more complex, requires tracking total)
            }


            // --- Chart.js Implementation (Dynamic Data) ---
            function getStatusCountsFromTable() {
                 const statusCounts = {
                    'In Transit': 0,
                    'Customs Clearance': 0,
                    'Out for Delivery': 0,
                    'Delivered': 0,
                    'Booked': 0
                 };
                 if (shipmentTableBody) {
                    const tableRows = shipmentTableBody.getElementsByTagName('tr');
                    for (let i = 0; i < tableRows.length; i++) {
                        const status = tableRows[i].dataset.status;
                        if (statusCounts.hasOwnProperty(status)) {
                            statusCounts[status]++;
                        }
                    }
                 }
                 return statusCounts;
            }

            function updateShipmentChartData() {
                if (shipmentStatusChart) {
                    const newStatusCounts = getStatusCountsFromTable();
                    shipmentStatusChart.data.labels = Object.keys(newStatusCounts);
                    shipmentStatusChart.data.datasets[0].data = Object.values(newStatusCounts);
                    shipmentStatusChart.update();
                }
            }


            function createShipmentChart() {
                if (chartCanvas) {
                    const ctx = chartCanvas.getContext('2d');
                    const initialStatusCounts = getStatusCountsFromTable(); // Get initial counts

                    // Destroy previous chart instance if it exists
                    if (shipmentStatusChart) {
                        shipmentStatusChart.destroy();
                    }

                    shipmentStatusChart = new Chart(ctx, { // Assign to the global variable
                        type: 'bar', // Changed to bar chart
                        data: {
                            labels: Object.keys(initialStatusCounts),
                            datasets: [{
                                label: 'Shipment Count', // Updated label
                                data: Object.values(initialStatusCounts),
                                backgroundColor: [ // Use distinct colors for bars
                                    '#60a5fa', // blue-400
                                    '#f87171', // red-400
                                    '#facc15', // yellow-400
                                    '#4ade80', // green-400
                                    '#9ca3af'  // gray-400
                                ],
                                borderColor: [ // Optional: Add borders
                                    '#3b82f6', // blue-500
                                    '#ef4444', // red-500
                                    '#eab308', // yellow-500
                                    '#22c55e', // green-500
                                    '#6b7280'  // gray-500
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            indexAxis: 'y', // Optional: Makes it a horizontal bar chart
                            scales: { // Add scales for bar chart
                                x: {
                                    beginAtZero: true,
                                    ticks: {
                                         stepSize: 1 // Ensure integer steps on axis
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    display: false // Hide legend for bar chart if label is clear
                                }
                            }
                        }
                    });
                }
            }

            // Create the chart initially
            createShipmentChart();

        });
    </script>

</body>
</html>
